library(shinyBS)
library(shiny)
library(shinyWidgets)

shinyUI(
  fluidPage(

    hr(),
    column(12,


           # Help menu dropdown
           #tags$head(tags$style(HTML("#DD_options { background-color:black; border-color: #FFFFFF; border-width: 3px }"))),
           div(style="display: inline-block;vertical-align:top;float:right;",

               dropdownButton(
                 column(12,
                        h5(tags$b("Glossary",style="color:#347ab6")),
                        column(12,

                               tabsetPanel(

                                 tabPanel(h5("CMPS",style = "color:black"), HTML("<br>"), DT::dataTableOutput('CMPhelp'),value=1),
                                 tabPanel(h5("Performance metrics",style = "color:black"), HTML("<br>"), DT::dataTableOutput('PMhelp'),value=2),
                                 tabPanel(h5("Metric Explanation",style="color:black"),img(src = "Performance metrics.jpg", height = 850, width = 850))

                               )# end of dropdownbutton CMP

                        ),
                        column(12,HTML("<br>")),

                        h5(tags$b("Contact",style="color:#347ab6")),
                        column(12,
                               h5("For technical questions or bug reports please contact ", a("tom@bluematterscience.com", href="mailto:tom@bluematterscience.com", target="_blank"),style = "color:grey")
                        ),
                        h5(tags$b("Acknowledgements",style="color:#347ab6")),
                        column(12,
                               h5("This work was carried out under the provision of the ICCAT Atlantic Wide Research Programme for Bluefin Tuna (GBYP), funded by the European Union, several ICCAT CPCs, the ICCAT Secretariat and by other entities (see: http://www.iccat.int/GBYP/en/Budget.htm). The contents of this paper do not necessarily reflect the point of view of ICCAT or other funders and in no ways anticipate ICCAT future policy in this area.")

                        )


                 ),

                 inputId = "DD_help",
                 label = "Help",
                 icon = icon("info"),
                 status = "primary",
                 right=TRUE,
                 circle = FALSE,
                 width="950px"

               )
              
               
           ), # end of help menu dropdown
           
      div(style="display: inline-block;vertical-align:top;float:right;",    
           dropdownButton(
             column(12,
                    radioButtons("WScheme",label="Metric weighting scheme",choiceNames=c("Equal","Double Safety","Double Yield"),choiceValues=c(1,2,3),selected=1),
                    numericInput("DecPls",label="No. Decimal places",min=1,max=4,step=1,value=2),    
                    radioButtons("NormByZero",label="Calculation of summary performance",choices=c("Min-max","Percentage difference")),
                    radioButtons("ColCode",label="Color scheme",c("Viridis","Blue scale","Blue scale 2","Grey scale","None"),selected="Blue scale"),
                    checkboxInput("InvCol",label="Invert color scheme")
             ),
             
             inputId = "DD_options",
             label = "Options",
             icon = icon("grip-horizontal"),
             status = "primary",
             right=TRUE,
             circle = FALSE,
             width="350px"
             
           )
           
       ) # end of options menu dropdown
   
    ),

    column(12,hr()),

    titlePanel(paste0("ABT MSE: CMP Performance Overview (v",CompRes$Version,", ",substr(CompRes$Sys.time,1,10),")")),

    fluidRow(

      column(12,
             fluidRow(
               column(12,br()),
               column(2,
                      img(src = "ICCAT3.jpg", height = 70, width = 110),
                      img(src = "bft2.jpg", height = 70, width = 110)),
               column(10,h5("The Atlantic-Wide Research Programme on Bluefin Tuna (GBYP) is investigating MSE for
                      providing robust advice consistent with the precautionary approach. MSE aims to reveal
                      management procedures that are robust to uncertainties in data collection, population and
                      fishing dynamics. In MSE these uncertainties are represented by alternative operating models (OMs).",style="color:grey"),
                      h5(" "),
                      h5("    In this PRELIMINARY interactive demo, the user can tabulate the performance of various candidate management procedures.",style="color:grey")

                      ),
               column(12,br(),hr(),br())
             )
      ),

      column(12,
             column(2,radioButtons("Tunings1",label="By Tuning",choices=Tunes, selected=2,inline=T)),
             column(2,radioButtons("Configs1",label="By Config",choices=Configs, selected="a",inline=T)),
             column(4,checkboxGroupInput("MPtypes1",label="By Type",choices=MPtypes, selected=MPtypes,inline=T)),
             column(2,checkboxInput("Anon1",label="Anonymize"),value=0),
             column(2,actionButton("Make",label=h5("Recalculate",style="color:red")))
      ),
     
      column(12,hr()),
      column(12,h4("Primary Performance Quilt Plot")),
      column(12, column(DT::dataTableOutput('Tab1'),width = 6)),
      
      column(12,hr()),
      column(12,h4("Secondary Performance Quilt Plot (East / Eastern)")),
      column(12, column(DT::dataTableOutput('Tab2'),width = 6)),
     
      column(12,hr()),
      column(12,h4("Secondary Performance Quilt Plot (West / Western)")),
      column(12, column(DT::dataTableOutput('Tab3'),width = 6)),
      
      column(12,hr()),
      column(12,plotOutput("Radar1")),
        
      # column
      column(12,style="height:40px"),
      column(8,style="height:40px"),
      column(2,style="height:40px; padding:9px",textOutput("SessionID")),
      column(2,style="height:40px", h6("copyright (c) ICCAT 2022"))
    ) # fluid row
  )# Fluidpage
)

